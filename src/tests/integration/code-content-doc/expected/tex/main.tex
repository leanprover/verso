
\documentclass{memoir}

\usepackage{sourcecodepro}
\usepackage{sourcesanspro}
\usepackage{sourceserifpro}

\usepackage{fancyvrb}
\usepackage{fvextra}

\usepackage[most]{tcolorbox}
\usepackage{hyperref}
\usepackage[normalem]{ulem}
\newcommand{\coloredwave}[2]{\textcolor{#1}{\uwave{\textcolor{black}{#2}}}}
\usepackage{newunicodechar}

% Work around the fact that
% U+271D LATIN CROSS doesn't exist in
% DejaVu Sans Mono Oblique. \textup
% is fontspec for "upright, not italic/oblique".
\newunicodechar{âœ}{\textup{âœ}}

\definecolor{errorColor}{HTML}{ff0000}
\definecolor{infoColor}{HTML}{007f00}
\definecolor{warningColor}{HTML}{0000ff}
\newcommand{\errorDecorate}[1]{\coloredwave{errorColor}{#1}}
\newcommand{\infoDecorate}[1]{\coloredwave{infoColor}{#1}}
\newcommand{\warningDecorate}[1]{\coloredwave{warningColor}{#1}}
\DefineVerbatimEnvironment{LeanVerbatim}{Verbatim}
  {commandchars=\\\{\},fontsize=\small,breaklines=true}
\DefineVerbatimEnvironment{FileVerbatim}{Verbatim}{commandchars=\\\{\},fontsize=\small,breaklines=true,frame=single,framesep=2mm,numbers=left}
\CustomVerbatimCommand{\LeanVerb}{Verb}
  {commandchars=\\\{\},fontsize=\small}
\CustomVerbatimCommand{\FileListingVerb}{Verb}
  {commandchars=\\\{\},fontsize=\small,frame=single,framesep=2mm, numbers=left}

\definecolor{bordercolor}{HTML}{98B2C0}
\definecolor{medgray}{HTML}{555555}
\newtcolorbox{docstringBox}[2][]{colback=white,
breakable,
colframe=bordercolor,
colbacktitle=white,
enhanced,
coltitle=medgray,
attach boxed title to top left={xshift=2mm,yshift=-2mm},
boxrule=0.4pt,
fonttitle=\sffamily\fontsize{6pt}{7pt}\selectfont,
boxed title style={top=-0.3mm,bottom=-0.3mm,left=-0.3mm,right=-0.3mm,boxrule=0.4pt},
title={#2},#1}


\makechapterstyle{lean}{%
\renewcommand*{\chaptitlefont}{\sffamily\HUGE}
\renewcommand*{\chapnumfont}{\chaptitlefont}
% allow for 99 chapters!
\settowidth{\chapindent}{\chapnumfont 999}
\renewcommand*{\printchaptername}{}
\renewcommand*{\chapternamenum}{}
\renewcommand*{\chapnumfont}{\chaptitlefont}
\renewcommand*{\printchapternum}{%
\noindent\llap{\makebox[\chapindent][l]{%
\chapnumfont \thechapter}}}
\renewcommand*{\afterchapternum}{}
}

\chapterstyle{lean}

\setsecheadstyle{\sffamily\bfseries\Large}
\setsubsecheadstyle{\sffamily\bfseries\large}
\setsubsubsecheadstyle{\sffamily\bfseries}

\renewcommand{\cftchapterfont}{\normalfont\sffamily}
\renewcommand{\cftsectionfont}{\normalfont\sffamily}
\renewcommand{\cftchapterpagefont}{\normalfont\sffamily}
\renewcommand{\cftsectionpagefont}{\normalfont\sffamily}
\setmonofont{DejaVu Sans Mono}

\title{\sffamily Title of the Doc}
\author{\sffamily Harry Q. Bovik}
\date{\sffamily }

\begin{document}

\frontmatter

\begin{titlingpage}
\maketitle
\end{titlingpage}

\tableofcontents

\mainmatter

\chapter*{Introduction}
Here is some code with vertical bars:
\begin{LeanVerbatim}
\textbf{def} or := (Â· \symbol{124}\symbol{124} Â·)

\end{LeanVerbatim}

Here is some with a variety of interesting Unicode, including characters where UTF-16 is funky:
\begin{LeanVerbatim}
\textbf{def} Set (\textit{Î±} : Type u) : Type u := \textit{Î±} â†’ Prop

\textbf{instance} : EmptyCollection (Set \textit{Î±}) \textbf{where}
  emptyCollection := \textbf{fun} _ => False

\textbf{instance} : Union (Set \textit{Î±}) \textbf{where}
  union \textit{a} \textit{b} := \textbf{fun} \textit{x} => \textit{a} \textit{x} âˆ¨ \textit{b} \textit{x}

\textbf{instance} : Inter (Set \textit{Î±}) \textbf{where}
  inter \textit{a} \textit{b} := \textbf{fun} \textit{x} => \textit{a} \textit{x} âˆ§ \textit{b} \textit{x}

\textbf{instance} : Membership \textit{Î±} (Set \textit{Î±}) \textbf{where}
  mem \textit{a} \textit{x} := \textit{a} \textit{x}

@[\textbf{ext}]
\textbf{theorem} Set.ext \symbol{123}\textit{a} \textit{b} : Set \textit{Î±}\symbol{125} :
    (âˆ€ \textit{x}, \textit{x} âˆˆ \textit{a} â†” \textit{x} âˆˆ \textit{b}) â†’ \textit{a} = \textit{b} := \textbf{by}
  \textbf{intro} \textit{h}
  \textbf{funext} \textit{x}
  \textbf{exact} propext (\textit{h} \textit{x})

\textbf{instance} : HasSubset (Set \textit{Î±}) \textbf{where}
  Subset \textit{a} \textit{b} := âˆ€ \textit{x}, \textit{x} âˆˆ \textit{a} â†’ \textit{x} âˆˆ \textit{b}

@[\textbf{simp}, \textbf{grind} .]
\textbf{theorem} Set.subset_refl \symbol{123}\textit{a} : Set \textit{Î±}\symbol{125} : \textit{a} âŠ† \textit{a} := \textbf{by}
  \textbf{simp} [(Â· âŠ† Â·)]

@[\textbf{grind} â†]
\textbf{theorem} Set.subset_union \symbol{123}\textit{a} \textit{b} \textit{c} : Set \textit{Î±}\symbol{125} :
    \textit{a} âŠ† \textit{b} â†’ \textit{a} âŠ† \textit{b} âˆª \textit{c} := \textbf{by}
  \textbf{simp} [(Â· âŠ† Â·), (Â· âˆª Â·), (Â· âˆˆ Â·)]
  \textbf{intro} \textit{h}
  \textbf{solve_by_elim}

\textbf{def} Set.powerset (\textit{a} : Set \textit{Î±}) : Set (Set \textit{Î±}) :=
  \textbf{fun} (\textit{x} : Set \textit{Î±}) => \textit{x} âŠ† \textit{a}

\textbf{notation} "ğ’« " \textit{x} => Set.powerset \textit{x}

\textbf{theorem} Set.powerset_empty_nonempty :
    âˆƒ (\textit{a} : Set \textit{Î±}), \textit{a} âˆˆ ğ’« \symbol{123}\symbol{125} := \textbf{by}
  \textbf{constructor}
  \textbf{case} w => \textbf{exact} \symbol{123}\symbol{125}
  \textbf{simp} [(Â· âˆˆ Â·), powerset]

@[\infoDecorate{\textbf{grind?} â†’}]
\textbf{theorem} Set.powerset_empty_unique (\textit{x} \textit{y} : Set \textit{Î±}) :
    \textit{x} âˆˆ (ğ’« \symbol{123}\symbol{125}) â†’ \textit{y} âˆˆ (ğ’« \symbol{123}\symbol{125}) â†’ \textit{x} = \textit{y} := \textbf{by}
  \textbf{intro} \textit{hx} \textit{hy}
  \textbf{ext} \textit{x'}
  \textbf{exact} (iff_false_right (\textit{hy} \textit{x'})).mpr (\textit{hx} \textit{x'})

\end{LeanVerbatim}

And now some inline code:
\begin{itemize}
\item \LeanVerb|âˆ€\textit{x} \textit{y} : Set _, \textit{x} âˆˆ ((ğ’« \textit{x}) âˆª (ğ’« \textit{y}))|
\item \LeanVerb|true \symbol{124}\symbol{124} false|
\item \LeanVerb|False â†’ True|

\end{itemize}

\end{document}
